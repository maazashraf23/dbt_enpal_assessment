version: 2

models:
  - name: rep_sales_funnel_monthly
    description: >
      Monthly funnel KPI counts for deals and sales-call milestones.
      Each row represents a funnel step for a given month.
      {{ doc('sales_funnel_assumptions') }}
      {{ doc('sales_funnel_caveats') }}
    columns:
      - name: month
        description: "{{ doc('month_end') }}"
        tests:
          - not_null
          - relationships:
              to: ref('dim_date')
              field: month_end
      - name: kpi_name
        description: "{{ doc('kpi_name') }}"
        tests:
          - not_null
      - name: funnel_step
        description: "{{ doc('funnel_step') }}"
        tests:
          - accepted_values:
              values: ['1','2','2.1','3','3.1','4','5','6','7','8','9']
      - name: deals_count
        description: "{{ doc('deals_count') }}"
        tests:
          - not_null



